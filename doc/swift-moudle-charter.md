## 📦 Swift Module Design Charter

### 🌟 目的

プロトタイピングと OCP（開放閉鎖原則）を活用し、モジュール単位での開発効率と柔軟性を高めるための設計指針を定義する

---

### ✅ 原則

1. **Skill モジュール間で依存関係をつくらないこと**

   * 同じ Swift Package 内であっても、Skill モジュール同士は依存しない
   * Skill モジュール間の依存関係は、Swift 標準ライブラリおよび外部ライブラリのみに限定する
   * 同一 Package 内の他の Skill モジュールを `import` してはならない
   * 複数の Skill モジュールで同じライブラリモジュール（内部 module）を共通して `import` してはならない

2. **Skill モジュール内で定義は完結させ、他モジュールと定義を共有しないこと**

   * Skill モジュールは自分自身の文脈内ですべての定義（構造体、enum、関数、定数、extension など）を持つこと
   * 他の Skill モジュールの定義を流用・import してはならない
   * 構造体や enum など、意味を含む定義はモジュール間で共有しない
   * 文脈ごとに再定義することを推奨し、定義が似ていてもコピーして明確に分離する

3. **文脈をまたいで再利用したい定義は、外部 Package として明示的に切り出すこと**

   * 複数の Skill モジュールで再利用されることを意図した定義は、独立した Swift Package として定義する
   * それは Skill モジュールではなく、ユーティリティまたは基盤ライブラリとして扱う
   * 共通定義は「共通であること」が明示され、設計の責務が分離されていなければならない

4. **Skill モジュール間で通信が必要な場合は、親モジュールを介すること**

   * Skill モジュール間での直接通信は禁止する
   * Skill モジュールを統括する親モジュールを作成し、通信処理をそこで行うこと
   * モジュール間通信に関わる実装および定義は、OCP（開放閉鎖原則）に従って拡張可能な構造で実装すること
   * 通信に用いる値は `String`, `UUID`, `Int`, `Bool`, `Double`, `Data` などの primitive 型に限定すること

### ☕ 補説指針

* **意味の共有ではなく構造の分離を重視すること**
* **似ているからといって共通化しない。似ているならコピーせよ**
* **Copy the hell out of it. 共通化は意味が安定してから**
* **module を分けた意味は、文脈を分けたこと。共通 module はその意味を壊す。**

---

このチャーターは、Skill モジュール設計および Swift アプリケーション全体の構造純度を高めるための指針である
